<view class="container">
   <view class="search-wrap">
        <van-search field-class="search-input-wrap"  
            shape="round"
            placeholder="搜索商家" 
            bind:search="onSearch" />
    </view>
    <scroll-view class="merchant-scroll-view" scroll-y="true" style="height:{{scrollHeight}}px;">
        <block wx:if="{{merchantList && merchantList.length>0}}">
          <view 
            wx:for="{{merchantList}}"  
            wx:for-item="item" 
            wx:key="id"
            class="merchant-card-container"
            style="background-image:url({{item.logoUrlValue}});background-size: 100% 160px; background-repeat:no-repeat;"
            >
            <view class="merchant-card-booktime">
              <view>1小时</view>
              <view>起订</view>
            </view>
            <view class="merchant-card-info">
                <view class="font-white" style="padding-left:10px;">
                  <view>
                    <span class="font-18">
                    {{item.merchantName}}
                    </span>
                    <span class="font-12" style="padding-left: 5px;">
                      {{item.merchantDistance}}km
                    </span>
                  </view>
                  <view>
                    <span class="font-12">
                      营业时间：
                      <span wx:if="{{item.startTime}}">{{item.startTime}}</span>
                      <span wx:if="{{item.endTime}}">-{{item.endTime}}</span>
                      <span wx:if="{{!item.startTime && !item.endTime}}">00:00-23:59</span>
                    </span>
                    <span class="font-12 font-green" style="padding-left: 5px;">{{item.businessState}}</span>
                  </view>     
                </view>
                <view class="merchant-card-info-call-icon">
                  <van-icon name="phone" size="20" color="#fff"/>
                </view>
              </view>
              <view class="merchant-card-more">
                <view wx:if="{{!selectMerchantId || selectMerchantId!=item.id}}" data-id="{{item.id}}" class="merchant-card-more-book font-16" bindtap="getRoomList">
                  预约茶室<van-icon name="arrow-down" color="rgb(72,165,132)" />
                </view>
                <view wx:if="{{selectMerchantId && selectMerchantId==item.id}}" class="merchant-card-more-book font-16" bindtap="cleanRoomList">
                  收起茶室<van-icon name="arrow-up" color="rgb(72,165,132)"/>
                </view>
                <block wx:if="{{selectMerchantId && selectMerchantId==item.id && roomList && roomList.length>0}}">
                  <view class="merchant-room-card-container"
                        wx:for="{{roomList}}"  
                        wx:for-item="roomItem" 
                        wx:key="id">
                      <view class="merchant-room-card-logo"
                        style="background-image:url({{roomItem.roomLogoUrl}});background-size: 100% 100%;background-repeat:no-repeat;">
                        <view class="merchant-room-card-logo-corner">
                          {{roomItem.startTime}}小时起订
                        </view>
                      </view>
                      <view class="merchant-room-card-label-container">
                        <view class="merchant-room-card-label font-16" style="margin-top: 4px;">
                          {{roomItem.roomName}}
                        </view>
                        <view class="merchant-room-card-label font-12 font-green">
                          推荐人数：适合
                          <span wx:if="{{roomItem.recomNumUsers}}">{{roomItem.recomNumUsers}}</span>
                          <span wx:else>1</span>人</view>
                        <view class="merchant-room-card-label font-12" style="width:100%;text-align:left">
                          <van-rate size="{{12}}" gutter="2" value="{{roomItem.rate}}" color="#ffd21e" readonly />
                          {{roomItem.buyRecord>0?roomItem.buyRecord:0}}已售
                        </view>
                      </view>
                      <view class="merchant-room-card-label-container">
                        <view class="merchant-room-card-label" style="margin-top: 4px;"></view>
                        <view class="merchant-room-card-label font-12 font-red">
                          <span wx:if="{{roomItem.menberAmount && roomItem.menberAmount >0}}">
                            会员<span class="font-14">￥{{roomItem.menberAmount}}</span>/小时
                          </span>
                        </view>
                        <view class="merchant-room-card-label font-12 font-gray" style="{{roomItem.menberAmount && roomItem.menberAmount >0?text-decoration:line-through}}">
                          <span wx:if="{{roomItem.hoursAmount && roomItem.hoursAmount >0}}">
                            非会员{{roomItem.hoursAmount}}/小时
                          </span>
                       </view>
                      </view>
                      <view wx:if="{{roomList.length>1 && index != (roomList.length-1)}}"
                        class="van-hairline--top-bottom"
                        >
                      </view>
                  </view>
                </block>
              </view>
          </view>
        </block>
        <block wx:else>
          <van-empty description="暂无数据" />
        </block>
    </scroll-view>

</view>